{
    "version": 3,
    "terraform_version": "0.11.7",
    "serial": 5,
    "lineage": "78e2788c-cc86-64f3-9776-6298fb46c5a0",
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {},
            "resources": {},
            "depends_on": []
        },
        {
            "path": [
                "root",
                "vault"
            ],
            "outputs": {
                "ca_cert_pem": {
                    "sensitive": false,
                    "type": "string",
                    "value": "-----BEGIN CERTIFICATE-----\nMIIDUjCCArSgAwIBAgIRAKOSV86b5D5avHzMoKO2NeQwCgYIKoZIzj0EAwQwgcQx\nCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEVMBMGA1UEBxMMVGhlIEludHJhbmV0\nMRswGQYDVQQJExIxMjMgRXhhbXBsZSBTdHJlZXQxEzARBgNVBBETCjk1NTU5LTEy\nMjcxFTATBgNVBAoTDEV4YW1wbGUsIEluYzEsMCoGA1UECxMjRGVwYXJ0bWVudCBv\nZiBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkxGjAYBgNVBAMTEUV4YW1wbGUgSW5jLiBS\nb290MB4XDTE4MDcxOTAzMTczMloXDTIxMDcxODAzMTczMlowgcQxCzAJBgNVBAYT\nAlVTMQswCQYDVQQIEwJDQTEVMBMGA1UEBxMMVGhlIEludHJhbmV0MRswGQYDVQQJ\nExIxMjMgRXhhbXBsZSBTdHJlZXQxEzARBgNVBBETCjk1NTU5LTEyMjcxFTATBgNV\nBAoTDEV4YW1wbGUsIEluYzEsMCoGA1UECxMjRGVwYXJ0bWVudCBvZiBDZXJ0aWZp\nY2F0ZSBBdXRob3JpdHkxGjAYBgNVBAMTEUV4YW1wbGUgSW5jLiBSb290MIGbMBAG\nByqGSM49AgEGBSuBBAAjA4GGAAQBxR5surUAEw4ClTvHkXpoW1xSPrj+sKojeth7\nHxM9rNDp+8Xza8Hh64Wd/UpcabjwU8xgJ1+T9IZv8bcchsxpuN0Auvmo76gszwSG\nub39YYr/XuG5mj5fAfJsA7Eq1bFOCDJsz36FiUdyx4qgKuN5NTmipXtNC+1rr55T\nkX5gpuEv/1yjQjBAMA4GA1UdDwEB/wQEAwICBDAPBgNVHRMBAf8EBTADAQH/MB0G\nA1UdDgQWBBQxvFDQmEUsK4UsPTlJYJvSgkspVTAKBggqhkjOPQQDBAOBiwAwgYcC\nQW5kUByaEkQFNTLaifQwRcsNg/ICOYKR3bO8c/h5o+QzDo9YXppMM/5IvZYlthas\nuxtXMPUwcRv6k6bssPAGyadfAkIBwcJp2AQR4/9Vu+qhTIevyeTYEVvasrbH/IMH\nF+07cArLkNa0Wg+jrCpl79fX/zkgHI/22b179INiXcXdLLWvgZo=\n-----END CERTIFICATE-----\n"
                },
                "ca_private_key_algorithm": {
                    "sensitive": false,
                    "type": "string",
                    "value": "ECDSA"
                },
                "ca_private_key_pem": {
                    "sensitive": false,
                    "type": "string",
                    "value": "-----BEGIN EC PRIVATE KEY-----\nMIHcAgEBBEIBgghFFi5eWc74jgDhQrYDsD5Pg1DKmxm1rGJ+lawkBjJl+i3slgiY\nMW+fiCHWfYNfswl+GW91MJWAVSN/jW/uKwWgBwYFK4EEACOhgYkDgYYABAHFHmy6\ntQATDgKVO8eRemhbXFI+uP6wqiN62HsfEz2s0On7xfNrweHrhZ39SlxpuPBTzGAn\nX5P0hm/xtxyGzGm43QC6+ajvqCzPBIa5vf1hiv9e4bmaPl8B8mwDsSrVsU4IMmzP\nfoWJR3LHiqAq43k1OaKle00L7WuvnlORfmCm4S//XA==\n-----END EC PRIVATE KEY-----\n"
                },
                "instance_group": {
                    "sensitive": false,
                    "type": "string",
                    "value": "https://www.googleapis.com/compute/v1/projects/id-test-deploy-2/zones/us-east4-b/instanceGroups/vault-us-east4"
                }
            },
            "resources": {
                "data.external.sa-key-encrypted": {
                    "type": "external",
                    "depends_on": [
                        "google_service_account_key.vault-admin"
                    ],
                    "primary": {
                        "id": "-",
                        "attributes": {
                            "id": "-",
                            "program.#": "1",
                            "program.0": "/Users/joel/Source/vault-on-gke/terraform-vault-simple/.terraform/modules/63c6a6a9082a78476f338c12eb015967/encrypt_file.sh",
                            "query.%": "5",
                            "query.b64in": "true",
                            "query.data": "ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAiaWQtdGVzdC1kZXBsb3ktMiIsCiAgInByaXZhdGVfa2V5X2lkIjogIjIxZGIzMmI0YzUxOGYzYjFiYmVhZjRhZTVkYzNjM2Y1ZDI3MzVkM2YiLAogICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS1cbk1JSUV2QUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktZd2dnU2lBZ0VBQW9JQkFRQ3Uxam55VDkzRWgrVjZcbjl5Z2FQR0d0bElycUVWdzI1Q3BpeUl6NWw2SmVBUDhCN2dhOFlLcmh6UlZqS3A5YjUzQ1JwazQyZnNtZU9MaWxcbm5oQ1diWkJ2VURrQlJ6bUJSbGEzUEZHM1dNTGdrbWt1UnQ4TnJTdW51SWxMNzd4VEhYeE84N1J4UjFPMittakFcbkJsTDA5U0djR3NxbDVRRGdWL25hbksxTTJDb2N6Tk1CUFZBa1pkQTJ6V0xNWUdjc1VzLy95V0R0QmV1MFV0ZzZcbksxU3NsZFhDSkR1THZiVEd6M1hJWlExaElsL0xUenhCRlpwcnprNG9WaUhnZEZrWUdmRjh5QThZQ2VabmFxdU9cbnNKTENaaUd5UEhuQTBaNjVpRFhvWHZQcGQxdCtvVG5YVW9BNEhBajk0S3haM21TbnFvRE85K1huQnZOS3hsQ21cbkZhUmFRNlhCQWdNQkFBRUNnZ0VBQU45K2VoU0dnN2IzQVNKdlQ1UTZHNk1JZjRzM0plb0ZRU21GdExCYVpmUkVcbjBiWmx6N1orMi9KSmQwMk03cWxNOFZrK2ZqeXJWcEFyY2Q1RWNHL2JId2NzUmJLY21hWG5oSEkzYVQ0MitPYWFcblFsb2x2bng5SVpFRkZIMDl1RCtITWFDN1o2NW12MXpvUFg4NmxsRU1DaXJERk1sOE0rS1VrNUFoT0dkQzdKSmlcbkkrdEhGSlcrTUxOdXhidldIb3JKNnBNWkxXZjhLNmJOK1YwcjM4WStDa3BNaGJ5U2d4THlhNUQ4cUc0enZ4c2JcbmhyWUFQY1lZRHB3SGg0YjFkNVpYNEZJYmprdHAwenUwNURzYkIwN0cvRG84MGptRGpLOUljU2VSVlc2cFQ0SXJcblUvditxYU9ybk9Oc0FQYmhQM0ZSVzdwQ2k0L3lHLzE5dTJEdmlxRXpIUUtCZ1FEa0orY0toNEx5WURCd0R5L0ZcbmhYWW1nUTNMTlhiRkhjVXRaS1NRcGVFYnZYZWtKZmV4UmhTMkJCUlUyOWZZWkdaMDczaVNtUXFvZEhrR20vSkpcbjJabFNGMVZ4TVZMeUQ3ekc1eWxOZzRMWW0yaisxNHhsaDFFeE0vcUp6SU0wZXlyQ05NOFAwWjg5RGEwcFMram9cbmpsdUVSOTVyMlhiSmdVQU5hbWd2ZlpxUTdRS0JnUURFTElTZlNuNkZHQWhXSjB5RWFWUmlCZzRkREIwUzdKK1BcbnRyVlNEVU9qSEhiQ3lUNThRQWM0bmtDQ041Qm5lcFNVbk9MaTEyUWxjaFcyZ1ZiWDNLdXRKMFR6UHZDLzBMWTBcbmZ0b3ZOdE5wS0tUbGhxTVQ0ZmVPQ3dXU21JNm9XUEUza0VTOTc3WkswUlFjRkJ6UzMvU1grRDNWdCtrMVlEckxcbmMzcXJ4QWFScFFLQmdDZUJrVXdOY3VzdEpMWUNxeTcwa1NUUnErWEgrQ3pobnNiaGFtMXhpNjBWL2FWNnZZMEFcbnFZMXEzMnBpTnRuTmFNQk94djM3YWhFSk9mdWUvVEUwY0l2NlpsMFhRVm1ReUF0WTg1bnNiN2U2RVZBdldxd3BcbjVqRXk0dXNCY3FhZnZTT3JxVDcvK1NiRk8zcXZIa0ZHaFNvK2w1RHRNdGhwZlFIVnJ2eXFMeDF4QW9HQUZpNytcbmxGREZPK0c2MTVzOEVPRWtWSzFnblRKSWUySmNyTkM1Y2x6am9DZFEycmdOSTluTnR6NVdCeU9uWmJ3NzN3NWFcbnJkSXpsZlJ2dGlLc0lsN20zdjdJMGtUMHpvd1lmcGsxclE4akd3b29rM2dGS3ZOcm5obHErT2ZkZ2ZZRTJRYXNcbmIxb1RJQ1RDaEdaVjJCYlJQdm9vYSttUEtxVUdJUW1lL3B0OUxxMENnWUJYSEg4WFNIV21KTlJ5Smx3Q21Cd2ZcbkhiSVVGbEI1M0dRY1RBV2lLdEtWVnhxd2pwNDJkL0NkN0twSFEzeTVlQ2pDZnM0NnJEeitsUFZIeWRaTFlHSkNcbjJ1NkgrZ1hEQzlVMXB0V2dOMkZYTzNnREt0L3UwQmJieFE1RXhERHRTdVBWZzd2TjcwNzRhQjZ2eWVWdHZDaDRcbjE1MU1WT1FIcXBVL0orQ2piOGtHWlE9PVxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwKICAiY2xpZW50X2VtYWlsIjogInZhdWx0LWFkbWluQGlkLXRlc3QtZGVwbG95LTIuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJjbGllbnRfaWQiOiAiMTA5NzY0NDU0Mjk5MTY3OTUzOTU4IiwKICAiYXV0aF91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgiLAogICJ0b2tlbl91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL3Rva2VuIiwKICAiYXV0aF9wcm92aWRlcl94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92MS9jZXJ0cyIsCiAgImNsaWVudF94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3JvYm90L3YxL21ldGFkYXRhL3g1MDkvdmF1bHQtYWRtaW4lNDBpZC10ZXN0LWRlcGxveS0yLmlhbS5nc2VydmljZWFjY291bnQuY29tIgp9Cg==",
                            "query.dest": "vault_sa_key.json.encrypted.base64",
                            "query.key": "vault-init",
                            "query.keyring": "vault",
                            "result.%": "1",
                            "result.file": "vault_sa_key.json.encrypted.base64"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.external"
                },
                "data.external.vault-ca-cert-encrypted": {
                    "type": "external",
                    "depends_on": [
                        "tls_self_signed_cert.root"
                    ],
                    "primary": {
                        "id": "-",
                        "attributes": {
                            "id": "-",
                            "program.#": "1",
                            "program.0": "/Users/joel/Source/vault-on-gke/terraform-vault-simple/.terraform/modules/63c6a6a9082a78476f338c12eb015967/encrypt_file.sh",
                            "query.%": "4",
                            "query.data": "-----BEGIN CERTIFICATE-----\nMIIDUjCCArSgAwIBAgIRAKOSV86b5D5avHzMoKO2NeQwCgYIKoZIzj0EAwQwgcQx\nCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEVMBMGA1UEBxMMVGhlIEludHJhbmV0\nMRswGQYDVQQJExIxMjMgRXhhbXBsZSBTdHJlZXQxEzARBgNVBBETCjk1NTU5LTEy\nMjcxFTATBgNVBAoTDEV4YW1wbGUsIEluYzEsMCoGA1UECxMjRGVwYXJ0bWVudCBv\nZiBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkxGjAYBgNVBAMTEUV4YW1wbGUgSW5jLiBS\nb290MB4XDTE4MDcxOTAzMTczMloXDTIxMDcxODAzMTczMlowgcQxCzAJBgNVBAYT\nAlVTMQswCQYDVQQIEwJDQTEVMBMGA1UEBxMMVGhlIEludHJhbmV0MRswGQYDVQQJ\nExIxMjMgRXhhbXBsZSBTdHJlZXQxEzARBgNVBBETCjk1NTU5LTEyMjcxFTATBgNV\nBAoTDEV4YW1wbGUsIEluYzEsMCoGA1UECxMjRGVwYXJ0bWVudCBvZiBDZXJ0aWZp\nY2F0ZSBBdXRob3JpdHkxGjAYBgNVBAMTEUV4YW1wbGUgSW5jLiBSb290MIGbMBAG\nByqGSM49AgEGBSuBBAAjA4GGAAQBxR5surUAEw4ClTvHkXpoW1xSPrj+sKojeth7\nHxM9rNDp+8Xza8Hh64Wd/UpcabjwU8xgJ1+T9IZv8bcchsxpuN0Auvmo76gszwSG\nub39YYr/XuG5mj5fAfJsA7Eq1bFOCDJsz36FiUdyx4qgKuN5NTmipXtNC+1rr55T\nkX5gpuEv/1yjQjBAMA4GA1UdDwEB/wQEAwICBDAPBgNVHRMBAf8EBTADAQH/MB0G\nA1UdDgQWBBQxvFDQmEUsK4UsPTlJYJvSgkspVTAKBggqhkjOPQQDBAOBiwAwgYcC\nQW5kUByaEkQFNTLaifQwRcsNg/ICOYKR3bO8c/h5o+QzDo9YXppMM/5IvZYlthas\nuxtXMPUwcRv6k6bssPAGyadfAkIBwcJp2AQR4/9Vu+qhTIevyeTYEVvasrbH/IMH\nF+07cArLkNa0Wg+jrCpl79fX/zkgHI/22b179INiXcXdLLWvgZo=\n-----END CERTIFICATE-----\n",
                            "query.dest": "certs/vault-server.ca.crt.pem.encrypted.base64",
                            "query.key": "vault-init",
                            "query.keyring": "vault",
                            "result.%": "1",
                            "result.file": "certs/vault-server.ca.crt.pem.encrypted.base64"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.external"
                },
                "data.external.vault-tls-cert-encrypted": {
                    "type": "external",
                    "depends_on": [
                        "tls_locally_signed_cert.vault-server"
                    ],
                    "primary": {
                        "id": "-",
                        "attributes": {
                            "id": "-",
                            "program.#": "1",
                            "program.0": "/Users/joel/Source/vault-on-gke/terraform-vault-simple/.terraform/modules/63c6a6a9082a78476f338c12eb015967/encrypt_file.sh",
                            "query.%": "4",
                            "query.data": "-----BEGIN CERTIFICATE-----\nMIIDCTCCAmqgAwIBAgIQIhmX1gUO32FAuIVksjqIbTAKBggqhkjOPQQDBDCBxDEL\nMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRUwEwYDVQQHEwxUaGUgSW50cmFuZXQx\nGzAZBgNVBAkTEjEyMyBFeGFtcGxlIFN0cmVldDETMBEGA1UEERMKOTU1NTktMTIy\nNzEVMBMGA1UEChMMRXhhbXBsZSwgSW5jMSwwKgYDVQQLEyNEZXBhcnRtZW50IG9m\nIENlcnRpZmljYXRlIEF1dGhvcml0eTEaMBgGA1UEAxMRRXhhbXBsZSBJbmMuIFJv\nb3QwHhcNMTgwNzE5MDMxNzMyWhcNMjAwNzE4MDMxNzMyWjBUMRUwEwYDVQQKEwxF\neGFtcGxlLCBJbmMxHzAdBgNVBAsTFklUIFNlY3VyaXR5IE9wZXJhdGlvbnMxGjAY\nBgNVBAMTEXZhdWx0LmV4YW1wbGUubmV0MIGbMBAGByqGSM49AgEGBSuBBAAjA4GG\nAAQAwAyooYK8AHJBU+lUhxA/lFXIIoaqwkFkPBygxx3SMEnn2j5VQv1C2RQSfAWp\nv5+h8F00wZqM9h46p7ujM1S7/osBs9XyrAvU9Uu7cGo3UvpKkIyJcsk5kFM8swSF\nh17Cn13A+W7JOAP4+1VRmkpRtQMymyLOjZf7ND58Wa96znT6N1qjajBoMBMGA1Ud\nJQQMMAoGCCsGAQUFBwMBMAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgwFoAUMbxQ0JhF\nLCuFLD05SWCb0oJLKVUwIgYDVR0RBBswGYIRdmF1bHQuZXhhbXBsZS5uZXSHBH8A\nAAEwCgYIKoZIzj0EAwQDgYwAMIGIAkIB2UgeL/+Z6Fg+u9lHuBHA8AdlDfokhlAP\nejofMi+Cs2MFFRexhBo9TNQxLmCh8HsoGgUnl2qO2GDL1KR2qXOJ08ECQgHplmgy\nwHHbol0qkoAouDaIBDVfAHm3K7am+l/Fa0kgIRl/JnrJuLPAJSeAvGfAHzbPu2LE\nvhvbtT8V8TLC3G+TVw==\n-----END CERTIFICATE-----\n",
                            "query.dest": "certs/vault-server.crt.pem.encrypted.base64",
                            "query.key": "vault-init",
                            "query.keyring": "vault",
                            "result.%": "1",
                            "result.file": "certs/vault-server.crt.pem.encrypted.base64"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.external"
                },
                "data.external.vault-tls-key-encrypted": {
                    "type": "external",
                    "depends_on": [
                        "tls_private_key.vault-server"
                    ],
                    "primary": {
                        "id": "-",
                        "attributes": {
                            "id": "-",
                            "program.#": "1",
                            "program.0": "/Users/joel/Source/vault-on-gke/terraform-vault-simple/.terraform/modules/63c6a6a9082a78476f338c12eb015967/encrypt_file.sh",
                            "query.%": "4",
                            "query.data": "-----BEGIN EC PRIVATE KEY-----\nMIHcAgEBBEIB99x1KKeCWTYVzeDYAGBIl3/C9gVUUP0+cNIXgi8sc9q8dFkjACMK\nhuVG/5nZQzZdbM4KdMp2q+vCO74GWmWZFmSgBwYFK4EEACOhgYkDgYYABADADKih\ngrwAckFT6VSHED+UVcgihqrCQWQ8HKDHHdIwSefaPlVC/ULZFBJ8Bam/n6HwXTTB\nmoz2Hjqnu6MzVLv+iwGz1fKsC9T1S7twajdS+kqQjIlyyTmQUzyzBIWHXsKfXcD5\nbsk4A/j7VVGaSlG1AzKbIs6Nl/s0PnxZr3rOdPo3Wg==\n-----END EC PRIVATE KEY-----\n",
                            "query.dest": "certs/vault-server.key.pem.encrypted.base64",
                            "query.key": "vault-init",
                            "query.keyring": "vault",
                            "result.%": "1",
                            "result.file": "certs/vault-server.key.pem.encrypted.base64"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.external"
                },
                "data.google_iam_policy.vault": {
                    "type": "google_iam_policy",
                    "depends_on": [
                        "google_service_account.vault-admin"
                    ],
                    "primary": {
                        "id": "3966714649",
                        "attributes": {
                            "binding.#": "5",
                            "binding.1152836439.members.#": "1",
                            "binding.1152836439.members.2475073690": "serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com",
                            "binding.1152836439.role": "roles/storage.admin",
                            "binding.1217796547.members.#": "1",
                            "binding.1217796547.members.2475073690": "serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com",
                            "binding.1217796547.role": "roles/cloudkms.cryptoKeyEncrypterDecrypter",
                            "binding.1450444983.members.#": "1",
                            "binding.1450444983.members.2475073690": "serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com",
                            "binding.1450444983.role": "roles/iam.serviceAccountActor",
                            "binding.2741298589.members.#": "1",
                            "binding.2741298589.members.2475073690": "serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com",
                            "binding.2741298589.role": "roles/iam.serviceAccountKeyAdmin",
                            "binding.396430885.members.#": "1",
                            "binding.396430885.members.2475073690": "serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com",
                            "binding.396430885.role": "roles/logging.logWriter",
                            "id": "3966714649",
                            "policy_data": "{\"bindings\":[{\"members\":[\"serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/storage.admin\"},{\"members\":[\"serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/cloudkms.cryptoKeyEncrypterDecrypter\"},{\"members\":[\"serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/iam.serviceAccountActor\"},{\"members\":[\"serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/iam.serviceAccountKeyAdmin\"},{\"members\":[\"serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/logging.logWriter\"}]}"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "data.template_file.vault-config": {
                    "type": "template_file",
                    "depends_on": [
                        "google_storage_bucket.vault"
                    ],
                    "primary": {
                        "id": "93806dee66f9fb5caf5c9d23c0b39a3a44fe5ef57c5b55db7151a64ad1891d46",
                        "attributes": {
                            "id": "93806dee66f9fb5caf5c9d23c0b39a3a44fe5ef57c5b55db7151a64ad1891d46",
                            "rendered": "listener \"tcp\" {\n  address = \"0.0.0.0:8200\"\n  tls_cert_file = \"/etc/vault/vault-server.crt.pem\"\n  tls_key_file = \"/etc/vault/vault-server.key.pem\"\n  tls_client_ca_file = \"/etc/vault/vault-server.ca.crt.pem\"\n}\n\nstorage \"gcs\" {\n  bucket           = \"id-test-deploy-2-vault\"\n  credentials_file = \"/etc/vault/gcp_credentials.json\"\n}",
                            "template": "listener \"tcp\" {\n  address = \"0.0.0.0:8200\"\n  tls_cert_file = \"/etc/vault/vault-server.crt.pem\"\n  tls_key_file = \"/etc/vault/vault-server.key.pem\"\n  tls_client_ca_file = \"/etc/vault/vault-server.ca.crt.pem\"\n}\n\nstorage \"gcs\" {\n  bucket           = \"${storage_bucket}\"\n  credentials_file = \"/etc/vault/gcp_credentials.json\"\n}",
                            "vars.%": "1",
                            "vars.storage_bucket": "id-test-deploy-2-vault"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.template"
                },
                "data.template_file.vault-startup-script": {
                    "type": "template_file",
                    "depends_on": [
                        "data.template_file.vault-config",
                        "google_service_account.vault-admin",
                        "google_storage_bucket.vault-assets",
                        "google_storage_bucket_object.vault-ca-cert",
                        "google_storage_bucket_object.vault-sa-key",
                        "google_storage_bucket_object.vault-tls-cert",
                        "google_storage_bucket_object.vault-tls-key"
                    ],
                    "primary": {
                        "id": "6936cdaaec8d368695b7ad349248d5569a325463f0538a2dcbfdf7ece93f0034",
                        "attributes": {
                            "id": "6936cdaaec8d368695b7ad349248d5569a325463f0538a2dcbfdf7ece93f0034",
                            "rendered": "#!/bin/bash -xe\n\napt-get update\napt-get install -y unzip jq netcat nginx\n\n# Download and install Vault\ncd /tmp \u0026\u0026 \\\n  curl -sLO https://releases.hashicorp.com/vault/0.9.0/vault_0.9.0_linux_amd64.zip \u0026\u0026 \\\n  unzip vault_0.9.0_linux_amd64.zip \u0026\u0026 \\\n  mv vault /usr/local/bin/vault \u0026\u0026 \\\n  rm vault_0.9.0_linux_amd64.zip\n\n# Install Stackdriver for logging\ncurl -sSL https://dl.google.com/cloudagents/install-logging-agent.sh | bash\n\n# Vault config\nmkdir -p /etc/vault\ncat - \u003e /etc/vault/config.hcl \u003c\u003c'EOF'\nlistener \"tcp\" {\n  address = \"0.0.0.0:8200\"\n  tls_cert_file = \"/etc/vault/vault-server.crt.pem\"\n  tls_key_file = \"/etc/vault/vault-server.key.pem\"\n  tls_client_ca_file = \"/etc/vault/vault-server.ca.crt.pem\"\n}\n\nstorage \"gcs\" {\n  bucket           = \"id-test-deploy-2-vault\"\n  credentials_file = \"/etc/vault/gcp_credentials.json\"\n}\nEOF\nchmod 0600 /etc/vault/config.hcl\n\n# Service account key JSON credentials encrypted in GCS.\nif [[ ! -f /etc/vault/gcp_credentials.json ]]; then\n  gcloud kms decrypt \\\n    --location global \\\n    --keyring=vault \\\n    --key=vault-init \\\n    --plaintext-file /etc/vault/gcp_credentials.json \\\n    --ciphertext-file=\u003c(gsutil cat gs://id-test-deploy-2-vault-assets/vault_sa_key.json.encrypted.base64 | base64 -d)\n  chmod 0600 /etc/vault/gcp_credentials.json\nfi\n\n# Service environment\ncat - \u003e /etc/vault/vault.env \u003c\u003cEOF\nVAULT_ARGS=\nEOF\nchmod 0600 /etc/vault/vault.env\n\n# TLS key and certs\nfor tls_file in vault-server.ca.crt.pem.encrypted.base64 vault-server.key.pem.encrypted.base64 vault-server.crt.pem.encrypted.base64; do \n  gcloud kms decrypt \\\n    --location global \\\n    --keyring=vault \\\n    --key=vault-init \\\n    --plaintext-file /etc/vault/${tls_file//.encrypted.base64/} \\\n    --ciphertext-file=\u003c(gsutil cat gs://id-test-deploy-2-vault-assets/${tls_file} | base64 -d)\n  chmod 0600 /etc/vault/${tls_file//.encrypted.base64/}\ndone\n\n# Systemd service\ncat - \u003e /etc/systemd/system/vault.service \u003c\u003c'EOF'\n[Service]\nEnvironmentFile=/etc/vault/vault.env\nExecStart=\nExecStart=/usr/local/bin/vault server -config=/etc/vault/config.hcl ${VAULT_ARGS}\nEOF\nchmod 0600 /etc/systemd/system/vault.service\n\nsystemctl daemon-reload\nsystemctl enable vault\nsystemctl start vault\n\n# Setup vault env\nexport VAULT_ADDR=https://127.0.0.1:8200\nexport VAULT_CACERT=/etc/vault/vault-server.ca.crt.pem\nexport VAULT_CLIENT_CERT=/etc/vault/vault-server.crt.pem\nexport VAULT_CLIENT_KEY=/etc/vault/vault-server.key.pem\n\n# Add health-check proxy, GCE doesn't support https health checks.\ncat - \u003e /etc/nginx/sites-available/default \u003c\u003cEOF\nserver {\n    listen 80;\n    location / {\n        proxy_pass ${VAULT_ADDR}/v1/sys/health?standbyok=true\u0026sealedcode=200;\n    }\n}\nEOF\nsystemctl enable nginx\nsystemctl restart nginx\n\n# Wait 30s for Vault to start\n(while [[ $count -lt 15 \u0026\u0026 \"$(vault status 2\u003e\u00261)\" =~ \"connection refused\" ]]; do ((count=count+1)) ; echo \"$(date) $count: Waiting for Vault to start...\" ; sleep 2; done \u0026\u0026 [[ $count -lt 15 ]])\n[[ $? -ne 0 ]] \u0026\u0026 echo \"ERROR: Error waiting for Vault to start\" \u0026\u0026 exit 1\n\n# Initialize Vault, save encrypted unseal and root keys to Cloud Storage bucket.\nif [[ $(vault status) =~ \"Sealed: true\" ]]; then\n  echo \"Vault already initialized\"\nelse\n  vault init \u003e /tmp/vault_unseal_keys.txt\n\n  gcloud kms encrypt \\\n    --location=global  \\\n    --keyring=vault \\\n    --key=vault-init \\\n    --plaintext-file=/tmp/vault_unseal_keys.txt \\\n    --ciphertext-file=/tmp/vault_unseal_keys.txt.encrypted\n\n  gsutil cp /tmp/vault_unseal_keys.txt.encrypted gs://id-test-deploy-2-vault-assets\n  rm -f /tmp/vault_unseal_keys.txt*\nfi",
                            "template": "#!/bin/bash -xe\n\napt-get update\napt-get install -y unzip jq netcat nginx\n\n# Download and install Vault\ncd /tmp \u0026\u0026 \\\n  curl -sLO https://releases.hashicorp.com/vault/${vault_version}/vault_${vault_version}_linux_amd64.zip \u0026\u0026 \\\n  unzip vault_${vault_version}_linux_amd64.zip \u0026\u0026 \\\n  mv vault /usr/local/bin/vault \u0026\u0026 \\\n  rm vault_${vault_version}_linux_amd64.zip\n\n# Install Stackdriver for logging\ncurl -sSL https://dl.google.com/cloudagents/install-logging-agent.sh | bash\n\n# Vault config\nmkdir -p /etc/vault\ncat - \u003e /etc/vault/config.hcl \u003c\u003c'EOF'\n${config}\nEOF\nchmod 0600 /etc/vault/config.hcl\n\n# Service account key JSON credentials encrypted in GCS.\nif [[ ! -f /etc/vault/gcp_credentials.json ]]; then\n  gcloud kms decrypt \\\n    --location global \\\n    --keyring=${kms_keyring_name} \\\n    --key=${kms_key_name} \\\n    --plaintext-file /etc/vault/gcp_credentials.json \\\n    --ciphertext-file=\u003c(gsutil cat gs://${assets_bucket}/${vault_sa_key} | base64 -d)\n  chmod 0600 /etc/vault/gcp_credentials.json\nfi\n\n# Service environment\ncat - \u003e /etc/vault/vault.env \u003c\u003cEOF\nVAULT_ARGS=${vault_args}\nEOF\nchmod 0600 /etc/vault/vault.env\n\n# TLS key and certs\nfor tls_file in ${vault_ca_cert} ${vault_tls_key} ${vault_tls_cert}; do \n  gcloud kms decrypt \\\n    --location global \\\n    --keyring=${kms_keyring_name} \\\n    --key=${kms_key_name} \\\n    --plaintext-file /etc/vault/$${tls_file//.encrypted.base64/} \\\n    --ciphertext-file=\u003c(gsutil cat gs://${assets_bucket}/$${tls_file} | base64 -d)\n  chmod 0600 /etc/vault/$${tls_file//.encrypted.base64/}\ndone\n\n# Systemd service\ncat - \u003e /etc/systemd/system/vault.service \u003c\u003c'EOF'\n[Service]\nEnvironmentFile=/etc/vault/vault.env\nExecStart=\nExecStart=/usr/local/bin/vault server -config=/etc/vault/config.hcl $${VAULT_ARGS}\nEOF\nchmod 0600 /etc/systemd/system/vault.service\n\nsystemctl daemon-reload\nsystemctl enable vault\nsystemctl start vault\n\n# Setup vault env\nexport VAULT_ADDR=https://127.0.0.1:8200\nexport VAULT_CACERT=/etc/vault/vault-server.ca.crt.pem\nexport VAULT_CLIENT_CERT=/etc/vault/vault-server.crt.pem\nexport VAULT_CLIENT_KEY=/etc/vault/vault-server.key.pem\n\n# Add health-check proxy, GCE doesn't support https health checks.\ncat - \u003e /etc/nginx/sites-available/default \u003c\u003cEOF\nserver {\n    listen 80;\n    location / {\n        proxy_pass $${VAULT_ADDR}/v1/sys/health?standbyok=true\u0026sealedcode=200;\n    }\n}\nEOF\nsystemctl enable nginx\nsystemctl restart nginx\n\n# Wait 30s for Vault to start\n(while [[ $count -lt 15 \u0026\u0026 \"$(vault status 2\u003e\u00261)\" =~ \"connection refused\" ]]; do ((count=count+1)) ; echo \"$(date) $count: Waiting for Vault to start...\" ; sleep 2; done \u0026\u0026 [[ $count -lt 15 ]])\n[[ $? -ne 0 ]] \u0026\u0026 echo \"ERROR: Error waiting for Vault to start\" \u0026\u0026 exit 1\n\n# Initialize Vault, save encrypted unseal and root keys to Cloud Storage bucket.\nif [[ $(vault status) =~ \"Sealed: true\" ]]; then\n  echo \"Vault already initialized\"\nelse\n  vault init \u003e /tmp/vault_unseal_keys.txt\n\n  gcloud kms encrypt \\\n    --location=global  \\\n    --keyring=${kms_keyring_name} \\\n    --key=${kms_key_name} \\\n    --plaintext-file=/tmp/vault_unseal_keys.txt \\\n    --ciphertext-file=/tmp/vault_unseal_keys.txt.encrypted\n\n  gsutil cp /tmp/vault_unseal_keys.txt.encrypted gs://${assets_bucket}\n  rm -f /tmp/vault_unseal_keys.txt*\nfi",
                            "vars.%": "11",
                            "vars.assets_bucket": "id-test-deploy-2-vault-assets",
                            "vars.config": "listener \"tcp\" {\n  address = \"0.0.0.0:8200\"\n  tls_cert_file = \"/etc/vault/vault-server.crt.pem\"\n  tls_key_file = \"/etc/vault/vault-server.key.pem\"\n  tls_client_ca_file = \"/etc/vault/vault-server.ca.crt.pem\"\n}\n\nstorage \"gcs\" {\n  bucket           = \"id-test-deploy-2-vault\"\n  credentials_file = \"/etc/vault/gcp_credentials.json\"\n}",
                            "vars.kms_key_name": "vault-init",
                            "vars.kms_keyring_name": "vault",
                            "vars.service_account_email": "vault-admin@id-test-deploy-2.iam.gserviceaccount.com",
                            "vars.vault_args": "",
                            "vars.vault_ca_cert": "vault-server.ca.crt.pem.encrypted.base64",
                            "vars.vault_sa_key": "vault_sa_key.json.encrypted.base64",
                            "vars.vault_tls_cert": "vault-server.crt.pem.encrypted.base64",
                            "vars.vault_tls_key": "vault-server.key.pem.encrypted.base64",
                            "vars.vault_version": "0.9.0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.template"
                },
                "google_project_iam_policy.vault": {
                    "type": "google_project_iam_policy",
                    "depends_on": [
                        "data.google_iam_policy.vault"
                    ],
                    "primary": {
                        "id": "id-test-deploy-2",
                        "attributes": {
                            "etag": "BwVxUZ7Qjog=",
                            "id": "id-test-deploy-2",
                            "policy_data": "{\"bindings\":[{\"members\":[\"serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/iam.serviceAccountActor\"},{\"members\":[\"serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/logging.logWriter\"},{\"members\":[\"serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/storage.admin\"},{\"members\":[\"serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/cloudkms.cryptoKeyEncrypterDecrypter\"},{\"members\":[\"serviceAccount:vault-admin@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/iam.serviceAccountKeyAdmin\"}]}",
                            "project": "id-test-deploy-2",
                            "restore_policy": "{\"bindings\":[{\"members\":[\"serviceAccount:service-1004422898850@compute-system.iam.gserviceaccount.com\"],\"role\":\"roles/compute.serviceAgent\"},{\"members\":[\"serviceAccount:service-1004422898850@container-engine-robot.iam.gserviceaccount.com\"],\"role\":\"roles/container.serviceAgent\"},{\"members\":[\"serviceAccount:1004422898850-compute@developer.gserviceaccount.com\",\"serviceAccount:1004422898850@cloudservices.gserviceaccount.com\",\"serviceAccount:service-1004422898850@containerregistry.iam.gserviceaccount.com\"],\"role\":\"roles/editor\"},{\"members\":[\"serviceAccount:vault-server@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/iam.serviceAccountAdmin\"},{\"members\":[\"serviceAccount:vault-server@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/iam.serviceAccountKeyAdmin\"},{\"members\":[\"serviceAccount:vault-server@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/iam.serviceAccountTokenCreator\"},{\"members\":[\"serviceAccount:vault-server@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/iam.serviceAccountUser\"},{\"members\":[\"user:Joelmann2@gmail.com\"],\"role\":\"roles/owner\"},{\"members\":[\"serviceAccount:vault-server@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/resourcemanager.projectIamAdmin\"},{\"members\":[\"serviceAccount:vault-server@id-test-deploy-2.iam.gserviceaccount.com\"],\"role\":\"roles/viewer\"}],\"etag\":\"BwVxUZLZ73Q=\",\"version\":1}"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "google_service_account.vault-admin": {
                    "type": "google_service_account",
                    "depends_on": [],
                    "primary": {
                        "id": "projects/id-test-deploy-2/serviceAccounts/vault-admin@id-test-deploy-2.iam.gserviceaccount.com",
                        "attributes": {
                            "account_id": "vault-admin",
                            "display_name": "Vault Admin",
                            "email": "vault-admin@id-test-deploy-2.iam.gserviceaccount.com",
                            "id": "projects/id-test-deploy-2/serviceAccounts/vault-admin@id-test-deploy-2.iam.gserviceaccount.com",
                            "name": "projects/id-test-deploy-2/serviceAccounts/vault-admin@id-test-deploy-2.iam.gserviceaccount.com",
                            "project": "id-test-deploy-2",
                            "unique_id": "109764454299167953958"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "google_service_account_key.vault-admin": {
                    "type": "google_service_account_key",
                    "depends_on": [
                        "google_service_account.vault-admin"
                    ],
                    "primary": {
                        "id": "projects/id-test-deploy-2/serviceAccounts/vault-admin@id-test-deploy-2.iam.gserviceaccount.com/keys/21db32b4c518f3b1bbeaf4ae5dc3c3f5d2735d3f",
                        "attributes": {
                            "id": "projects/id-test-deploy-2/serviceAccounts/vault-admin@id-test-deploy-2.iam.gserviceaccount.com/keys/21db32b4c518f3b1bbeaf4ae5dc3c3f5d2735d3f",
                            "key_algorithm": "KEY_ALG_RSA_2048",
                            "name": "projects/id-test-deploy-2/serviceAccounts/vault-admin@id-test-deploy-2.iam.gserviceaccount.com/keys/21db32b4c518f3b1bbeaf4ae5dc3c3f5d2735d3f",
                            "private_key": "ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAiaWQtdGVzdC1kZXBsb3ktMiIsCiAgInByaXZhdGVfa2V5X2lkIjogIjIxZGIzMmI0YzUxOGYzYjFiYmVhZjRhZTVkYzNjM2Y1ZDI3MzVkM2YiLAogICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS1cbk1JSUV2QUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktZd2dnU2lBZ0VBQW9JQkFRQ3Uxam55VDkzRWgrVjZcbjl5Z2FQR0d0bElycUVWdzI1Q3BpeUl6NWw2SmVBUDhCN2dhOFlLcmh6UlZqS3A5YjUzQ1JwazQyZnNtZU9MaWxcbm5oQ1diWkJ2VURrQlJ6bUJSbGEzUEZHM1dNTGdrbWt1UnQ4TnJTdW51SWxMNzd4VEhYeE84N1J4UjFPMittakFcbkJsTDA5U0djR3NxbDVRRGdWL25hbksxTTJDb2N6Tk1CUFZBa1pkQTJ6V0xNWUdjc1VzLy95V0R0QmV1MFV0ZzZcbksxU3NsZFhDSkR1THZiVEd6M1hJWlExaElsL0xUenhCRlpwcnprNG9WaUhnZEZrWUdmRjh5QThZQ2VabmFxdU9cbnNKTENaaUd5UEhuQTBaNjVpRFhvWHZQcGQxdCtvVG5YVW9BNEhBajk0S3haM21TbnFvRE85K1huQnZOS3hsQ21cbkZhUmFRNlhCQWdNQkFBRUNnZ0VBQU45K2VoU0dnN2IzQVNKdlQ1UTZHNk1JZjRzM0plb0ZRU21GdExCYVpmUkVcbjBiWmx6N1orMi9KSmQwMk03cWxNOFZrK2ZqeXJWcEFyY2Q1RWNHL2JId2NzUmJLY21hWG5oSEkzYVQ0MitPYWFcblFsb2x2bng5SVpFRkZIMDl1RCtITWFDN1o2NW12MXpvUFg4NmxsRU1DaXJERk1sOE0rS1VrNUFoT0dkQzdKSmlcbkkrdEhGSlcrTUxOdXhidldIb3JKNnBNWkxXZjhLNmJOK1YwcjM4WStDa3BNaGJ5U2d4THlhNUQ4cUc0enZ4c2JcbmhyWUFQY1lZRHB3SGg0YjFkNVpYNEZJYmprdHAwenUwNURzYkIwN0cvRG84MGptRGpLOUljU2VSVlc2cFQ0SXJcblUvditxYU9ybk9Oc0FQYmhQM0ZSVzdwQ2k0L3lHLzE5dTJEdmlxRXpIUUtCZ1FEa0orY0toNEx5WURCd0R5L0ZcbmhYWW1nUTNMTlhiRkhjVXRaS1NRcGVFYnZYZWtKZmV4UmhTMkJCUlUyOWZZWkdaMDczaVNtUXFvZEhrR20vSkpcbjJabFNGMVZ4TVZMeUQ3ekc1eWxOZzRMWW0yaisxNHhsaDFFeE0vcUp6SU0wZXlyQ05NOFAwWjg5RGEwcFMram9cbmpsdUVSOTVyMlhiSmdVQU5hbWd2ZlpxUTdRS0JnUURFTElTZlNuNkZHQWhXSjB5RWFWUmlCZzRkREIwUzdKK1BcbnRyVlNEVU9qSEhiQ3lUNThRQWM0bmtDQ041Qm5lcFNVbk9MaTEyUWxjaFcyZ1ZiWDNLdXRKMFR6UHZDLzBMWTBcbmZ0b3ZOdE5wS0tUbGhxTVQ0ZmVPQ3dXU21JNm9XUEUza0VTOTc3WkswUlFjRkJ6UzMvU1grRDNWdCtrMVlEckxcbmMzcXJ4QWFScFFLQmdDZUJrVXdOY3VzdEpMWUNxeTcwa1NUUnErWEgrQ3pobnNiaGFtMXhpNjBWL2FWNnZZMEFcbnFZMXEzMnBpTnRuTmFNQk94djM3YWhFSk9mdWUvVEUwY0l2NlpsMFhRVm1ReUF0WTg1bnNiN2U2RVZBdldxd3BcbjVqRXk0dXNCY3FhZnZTT3JxVDcvK1NiRk8zcXZIa0ZHaFNvK2w1RHRNdGhwZlFIVnJ2eXFMeDF4QW9HQUZpNytcbmxGREZPK0c2MTVzOEVPRWtWSzFnblRKSWUySmNyTkM1Y2x6am9DZFEycmdOSTluTnR6NVdCeU9uWmJ3NzN3NWFcbnJkSXpsZlJ2dGlLc0lsN20zdjdJMGtUMHpvd1lmcGsxclE4akd3b29rM2dGS3ZOcm5obHErT2ZkZ2ZZRTJRYXNcbmIxb1RJQ1RDaEdaVjJCYlJQdm9vYSttUEtxVUdJUW1lL3B0OUxxMENnWUJYSEg4WFNIV21KTlJ5Smx3Q21Cd2ZcbkhiSVVGbEI1M0dRY1RBV2lLdEtWVnhxd2pwNDJkL0NkN0twSFEzeTVlQ2pDZnM0NnJEeitsUFZIeWRaTFlHSkNcbjJ1NkgrZ1hEQzlVMXB0V2dOMkZYTzNnREt0L3UwQmJieFE1RXhERHRTdVBWZzd2TjcwNzRhQjZ2eWVWdHZDaDRcbjE1MU1WT1FIcXBVL0orQ2piOGtHWlE9PVxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwKICAiY2xpZW50X2VtYWlsIjogInZhdWx0LWFkbWluQGlkLXRlc3QtZGVwbG95LTIuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJjbGllbnRfaWQiOiAiMTA5NzY0NDU0Mjk5MTY3OTUzOTU4IiwKICAiYXV0aF91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgiLAogICJ0b2tlbl91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL3Rva2VuIiwKICAiYXV0aF9wcm92aWRlcl94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92MS9jZXJ0cyIsCiAgImNsaWVudF94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3JvYm90L3YxL21ldGFkYXRhL3g1MDkvdmF1bHQtYWRtaW4lNDBpZC10ZXN0LWRlcGxveS0yLmlhbS5nc2VydmljZWFjY291bnQuY29tIgp9Cg==",
                            "private_key_type": "TYPE_GOOGLE_CREDENTIALS_FILE",
                            "public_key": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMrakNDQWVLZ0F3SUJBZ0lJVUlJT3hlRHB4THd3RFFZSktvWklodmNOQVFFRkJRQXdJREVlTUJ3R0ExVUUKQXhNVk1UQTVOelkwTkRVME1qazVNVFkzT1RVek9UVTRNQjRYRFRFNE1EY3hPVEF6TVRjek0xb1hEVEk0TURjeApOakF6TVRjek0xb3dJREVlTUJ3R0ExVUVBeE1WTVRBNU56WTBORFUwTWprNU1UWTNPVFV6T1RVNE1JSUJJakFOCkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXJ0WTU4ay9keElmbGV2Y29HanhoclpTSzZoRmMKTnVRcVlzaU0rWmVpWGdEL0FlNEd2R0NxNGMwVll5cWZXK2R3a2FaT05uN0puamk0cFo0UWxtMlFiMUE1QVVjNQpnVVpXdHp4UnQxakM0SkpwTGtiZkRhMHJwN2lKUysrOFV4MThUdk8wY1VkVHR2cG93QVpTOVBVaG5CcktwZVVBCjRGZjUycHl0VE5ncUhNelRBVDFRSkdYUU5zMWl6R0JuTEZMUC84bGc3UVhydEZMWU9pdFVySlhWd2lRN2k3MjAKeHM5MXlHVU5ZU0pmeTA4OFFSV2FhODVPS0ZZaDRIUlpHQm54Zk1nUEdBbm1aMnFyanJDU3dtWWhzang1d05HZQp1WWcxNkY3ejZYZGJmcUU1MTFLQU9Cd0kvZUNzV2Q1a3A2cUF6dmZsNXdielNzWlFwaFdrV2tPbHdRSURBUUFCCm96Z3dOakFNQmdOVkhSTUJBZjhFQWpBQU1BNEdBMVVkRHdFQi93UUVBd0lIZ0RBV0JnTlZIU1VCQWY4RUREQUsKQmdnckJnRUZCUWNEQWpBTkJna3Foa2lHOXcwQkFRVUZBQU9DQVFFQUdSMkVnQ0tvTGtKNktFWUF2Y2kybDlaMgprNzBVN0ZpY01yTmd1ZFBMdS9IK1NYU0czQ3hndGRZUWJhT2VDcGNNQkZMd092TFIxQ0lsWG1KTE5oT0VKa1owCis5YmRiSzcwMWN1aWp2Yy9qQ3dFbTg0am1LT0hrVWxGODVXK1ZqUGI1UXF4OGdHZmFONHRvUlJ5ZldBS1ZmRjUKNld0MFFITnFHTmRCZW9EaWxyZTd1a0dQQTZoQisyYTEzL2tGTW5iU0FTMTNiMnlCdDZuZ1d3OVM5TU45OVQrdQp6ZW9Ba3BIWFhhZU9JOXRmSnRhMEk3VFRUejVsSGhobTZESFpva0dRVUxUS2pBc0VVQ05ZRlZUOGJJUDZmaHBPClhNVDh1dm9sOU9CanRRdUs0SjFtMG5RWmZNT3NIbnMzajl5aXM1SlN2ajEvVWZHb25jVzJxYjFxWGJoM0FRPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=",
                            "public_key_type": "TYPE_X509_PEM_FILE",
                            "service_account_id": "projects/id-test-deploy-2/serviceAccounts/vault-admin@id-test-deploy-2.iam.gserviceaccount.com",
                            "valid_after": "2018-07-19T03:17:33Z",
                            "valid_before": "2028-07-16T03:17:33Z"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "google_storage_bucket.vault": {
                    "type": "google_storage_bucket",
                    "depends_on": [],
                    "primary": {
                        "id": "id-test-deploy-2-vault",
                        "attributes": {
                            "cors.#": "0",
                            "force_destroy": "false",
                            "id": "id-test-deploy-2-vault",
                            "labels.%": "0",
                            "lifecycle_rule.#": "0",
                            "location": "US",
                            "logging.#": "0",
                            "name": "id-test-deploy-2-vault",
                            "project": "id-test-deploy-2",
                            "self_link": "https://www.googleapis.com/storage/v1/b/id-test-deploy-2-vault",
                            "storage_class": "STANDARD",
                            "url": "gs://id-test-deploy-2-vault",
                            "versioning.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "google_storage_bucket.vault-assets": {
                    "type": "google_storage_bucket",
                    "depends_on": [],
                    "primary": {
                        "id": "id-test-deploy-2-vault-assets",
                        "attributes": {
                            "cors.#": "0",
                            "force_destroy": "false",
                            "id": "id-test-deploy-2-vault-assets",
                            "labels.%": "0",
                            "lifecycle_rule.#": "0",
                            "location": "US",
                            "logging.#": "0",
                            "name": "id-test-deploy-2-vault-assets",
                            "project": "id-test-deploy-2",
                            "self_link": "https://www.googleapis.com/storage/v1/b/id-test-deploy-2-vault-assets",
                            "storage_class": "STANDARD",
                            "url": "gs://id-test-deploy-2-vault-assets",
                            "versioning.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "google_storage_bucket_object.vault-ca-cert": {
                    "type": "google_storage_bucket_object",
                    "depends_on": [
                        "data.external.vault-ca-cert-encrypted",
                        "google_storage_bucket.vault-assets"
                    ],
                    "primary": {
                        "id": "id-test-deploy-2-vault-assets-vault-server.ca.crt.pem.encrypted.base64",
                        "attributes": {
                            "bucket": "id-test-deploy-2-vault-assets",
                            "cache_control": "",
                            "content": "\n",
                            "content_disposition": "",
                            "content_encoding": "",
                            "content_language": "",
                            "content_type": "application/octet-stream",
                            "crc32c": "OZ97aQ==",
                            "detect_md5hash": "aLMp2piT40CZx9itXLnJQA==",
                            "id": "id-test-deploy-2-vault-assets-vault-server.ca.crt.pem.encrypted.base64",
                            "md5hash": "aLMp2piT40CZx9itXLnJQA==",
                            "name": "vault-server.ca.crt.pem.encrypted.base64",
                            "storage_class": "STANDARD"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "google_storage_bucket_object.vault-sa-key": {
                    "type": "google_storage_bucket_object",
                    "depends_on": [
                        "data.external.sa-key-encrypted",
                        "google_storage_bucket.vault-assets"
                    ],
                    "primary": {
                        "id": "id-test-deploy-2-vault-assets-vault_sa_key.json.encrypted.base64",
                        "attributes": {
                            "bucket": "id-test-deploy-2-vault-assets",
                            "cache_control": "",
                            "content": "\n",
                            "content_disposition": "",
                            "content_encoding": "",
                            "content_language": "",
                            "content_type": "application/octet-stream",
                            "crc32c": "OZ97aQ==",
                            "detect_md5hash": "aLMp2piT40CZx9itXLnJQA==",
                            "id": "id-test-deploy-2-vault-assets-vault_sa_key.json.encrypted.base64",
                            "md5hash": "aLMp2piT40CZx9itXLnJQA==",
                            "name": "vault_sa_key.json.encrypted.base64",
                            "storage_class": "STANDARD"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "google_storage_bucket_object.vault-tls-cert": {
                    "type": "google_storage_bucket_object",
                    "depends_on": [
                        "data.external.vault-tls-cert-encrypted",
                        "google_storage_bucket.vault-assets"
                    ],
                    "primary": {
                        "id": "id-test-deploy-2-vault-assets-vault-server.crt.pem.encrypted.base64",
                        "attributes": {
                            "bucket": "id-test-deploy-2-vault-assets",
                            "cache_control": "",
                            "content": "\n",
                            "content_disposition": "",
                            "content_encoding": "",
                            "content_language": "",
                            "content_type": "application/octet-stream",
                            "crc32c": "OZ97aQ==",
                            "detect_md5hash": "aLMp2piT40CZx9itXLnJQA==",
                            "id": "id-test-deploy-2-vault-assets-vault-server.crt.pem.encrypted.base64",
                            "md5hash": "aLMp2piT40CZx9itXLnJQA==",
                            "name": "vault-server.crt.pem.encrypted.base64",
                            "storage_class": "STANDARD"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "google_storage_bucket_object.vault-tls-key": {
                    "type": "google_storage_bucket_object",
                    "depends_on": [
                        "data.external.vault-tls-key-encrypted",
                        "google_storage_bucket.vault-assets"
                    ],
                    "primary": {
                        "id": "id-test-deploy-2-vault-assets-vault-server.key.pem.encrypted.base64",
                        "attributes": {
                            "bucket": "id-test-deploy-2-vault-assets",
                            "cache_control": "",
                            "content": "\n",
                            "content_disposition": "",
                            "content_encoding": "",
                            "content_language": "",
                            "content_type": "application/octet-stream",
                            "crc32c": "OZ97aQ==",
                            "detect_md5hash": "aLMp2piT40CZx9itXLnJQA==",
                            "id": "id-test-deploy-2-vault-assets-vault-server.key.pem.encrypted.base64",
                            "md5hash": "aLMp2piT40CZx9itXLnJQA==",
                            "name": "vault-server.key.pem.encrypted.base64",
                            "storage_class": "STANDARD"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "tls_cert_request.vault-server": {
                    "type": "tls_cert_request",
                    "depends_on": [
                        "tls_private_key.vault-server"
                    ],
                    "primary": {
                        "id": "67a9967a8406429e8522020f29c870d723db9c6a",
                        "attributes": {
                            "cert_request_pem": "-----BEGIN CERTIFICATE REQUEST-----\nMIIBzTCCAS4CAQAwVDEVMBMGA1UEChMMRXhhbXBsZSwgSW5jMR8wHQYDVQQLExZJ\nVCBTZWN1cml0eSBPcGVyYXRpb25zMRowGAYDVQQDExF2YXVsdC5leGFtcGxlLm5l\ndDCBmzAQBgcqhkjOPQIBBgUrgQQAIwOBhgAEAMAMqKGCvAByQVPpVIcQP5RVyCKG\nqsJBZDwcoMcd0jBJ59o+VUL9QtkUEnwFqb+fofBdNMGajPYeOqe7ozNUu/6LAbPV\n8qwL1PVLu3BqN1L6SpCMiXLJOZBTPLMEhYdewp9dwPluyTgD+PtVUZpKUbUDMpsi\nzo2X+zQ+fFmves50+jdaoDUwMwYJKoZIhvcNAQkOMSYwJDAiBgNVHREEGzAZghF2\nYXVsdC5leGFtcGxlLm5ldIcEfwAAATAKBggqhkjOPQQDBAOBjAAwgYgCQgH3U96e\n0S81hNUMg4Ms5xpTKPUSKZ0k5og2uKEGc9POqVXASfHq4iP3pWwLvPJa32aJ6mpM\n1uvJYOJpRHZumocDtAJCARadIvA9zGAVNKi8AHopRojhTSZLjNsPXMe40wJjH6a7\nTs3j1wcWZ8bryhZqKkQTFb64QxElDX6irpfJkIH69BA4\n-----END CERTIFICATE REQUEST-----\n",
                            "dns_names.#": "1",
                            "dns_names.0": "vault.example.net",
                            "id": "67a9967a8406429e8522020f29c870d723db9c6a",
                            "ip_addresses.#": "1",
                            "ip_addresses.0": "127.0.0.1",
                            "key_algorithm": "ECDSA",
                            "private_key_pem": "409bdc136e79ea7043b12c9ef56a1335c59f6789",
                            "subject.#": "1",
                            "subject.0.common_name": "vault.example.net",
                            "subject.0.country": "",
                            "subject.0.locality": "",
                            "subject.0.organization": "Example, Inc",
                            "subject.0.organizational_unit": "IT Security Operations",
                            "subject.0.postal_code": "",
                            "subject.0.province": "",
                            "subject.0.serial_number": "",
                            "subject.0.street_address.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.tls"
                },
                "tls_locally_signed_cert.vault-server": {
                    "type": "tls_locally_signed_cert",
                    "depends_on": [
                        "tls_cert_request.vault-server",
                        "tls_private_key.root",
                        "tls_self_signed_cert.root"
                    ],
                    "primary": {
                        "id": "45326638878392844716549772825566283885",
                        "attributes": {
                            "allowed_uses.#": "1",
                            "allowed_uses.0": "server_auth",
                            "ca_cert_pem": "4cc700a624fe8e23a5925020455e73a06d1310de",
                            "ca_key_algorithm": "ECDSA",
                            "ca_private_key_pem": "c7b1af27c5ccd276129cddb612c4c8c6c6f2d759",
                            "cert_pem": "-----BEGIN CERTIFICATE-----\nMIIDCTCCAmqgAwIBAgIQIhmX1gUO32FAuIVksjqIbTAKBggqhkjOPQQDBDCBxDEL\nMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRUwEwYDVQQHEwxUaGUgSW50cmFuZXQx\nGzAZBgNVBAkTEjEyMyBFeGFtcGxlIFN0cmVldDETMBEGA1UEERMKOTU1NTktMTIy\nNzEVMBMGA1UEChMMRXhhbXBsZSwgSW5jMSwwKgYDVQQLEyNEZXBhcnRtZW50IG9m\nIENlcnRpZmljYXRlIEF1dGhvcml0eTEaMBgGA1UEAxMRRXhhbXBsZSBJbmMuIFJv\nb3QwHhcNMTgwNzE5MDMxNzMyWhcNMjAwNzE4MDMxNzMyWjBUMRUwEwYDVQQKEwxF\neGFtcGxlLCBJbmMxHzAdBgNVBAsTFklUIFNlY3VyaXR5IE9wZXJhdGlvbnMxGjAY\nBgNVBAMTEXZhdWx0LmV4YW1wbGUubmV0MIGbMBAGByqGSM49AgEGBSuBBAAjA4GG\nAAQAwAyooYK8AHJBU+lUhxA/lFXIIoaqwkFkPBygxx3SMEnn2j5VQv1C2RQSfAWp\nv5+h8F00wZqM9h46p7ujM1S7/osBs9XyrAvU9Uu7cGo3UvpKkIyJcsk5kFM8swSF\nh17Cn13A+W7JOAP4+1VRmkpRtQMymyLOjZf7ND58Wa96znT6N1qjajBoMBMGA1Ud\nJQQMMAoGCCsGAQUFBwMBMAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgwFoAUMbxQ0JhF\nLCuFLD05SWCb0oJLKVUwIgYDVR0RBBswGYIRdmF1bHQuZXhhbXBsZS5uZXSHBH8A\nAAEwCgYIKoZIzj0EAwQDgYwAMIGIAkIB2UgeL/+Z6Fg+u9lHuBHA8AdlDfokhlAP\nejofMi+Cs2MFFRexhBo9TNQxLmCh8HsoGgUnl2qO2GDL1KR2qXOJ08ECQgHplmgy\nwHHbol0qkoAouDaIBDVfAHm3K7am+l/Fa0kgIRl/JnrJuLPAJSeAvGfAHzbPu2LE\nvhvbtT8V8TLC3G+TVw==\n-----END CERTIFICATE-----\n",
                            "cert_request_pem": "5d6d6bf704090293eb0727b077fef798863dc90f",
                            "early_renewal_hours": "8760",
                            "id": "45326638878392844716549772825566283885",
                            "validity_end_time": "2020-07-17T20:17:32.118798-07:00",
                            "validity_period_hours": "17520",
                            "validity_start_time": "2018-07-18T20:17:32.118798-07:00"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.tls"
                },
                "tls_private_key.root": {
                    "type": "tls_private_key",
                    "depends_on": [],
                    "primary": {
                        "id": "c6a2e7edbea982bc1d01ac439e727a832a49076c",
                        "attributes": {
                            "algorithm": "ECDSA",
                            "ecdsa_curve": "P521",
                            "id": "c6a2e7edbea982bc1d01ac439e727a832a49076c",
                            "private_key_pem": "-----BEGIN EC PRIVATE KEY-----\nMIHcAgEBBEIBgghFFi5eWc74jgDhQrYDsD5Pg1DKmxm1rGJ+lawkBjJl+i3slgiY\nMW+fiCHWfYNfswl+GW91MJWAVSN/jW/uKwWgBwYFK4EEACOhgYkDgYYABAHFHmy6\ntQATDgKVO8eRemhbXFI+uP6wqiN62HsfEz2s0On7xfNrweHrhZ39SlxpuPBTzGAn\nX5P0hm/xtxyGzGm43QC6+ajvqCzPBIa5vf1hiv9e4bmaPl8B8mwDsSrVsU4IMmzP\nfoWJR3LHiqAq43k1OaKle00L7WuvnlORfmCm4S//XA==\n-----END EC PRIVATE KEY-----\n",
                            "public_key_openssh": "ecdsa-sha2-nistp521 AAAAE2VjZHNhLXNoYTItbmlzdHA1MjEAAAAIbmlzdHA1MjEAAACFBAHFHmy6tQATDgKVO8eRemhbXFI+uP6wqiN62HsfEz2s0On7xfNrweHrhZ39SlxpuPBTzGAnX5P0hm/xtxyGzGm43QC6+ajvqCzPBIa5vf1hiv9e4bmaPl8B8mwDsSrVsU4IMmzPfoWJR3LHiqAq43k1OaKle00L7WuvnlORfmCm4S//XA==\n",
                            "public_key_pem": "-----BEGIN PUBLIC KEY-----\nMIGbMBAGByqGSM49AgEGBSuBBAAjA4GGAAQBxR5surUAEw4ClTvHkXpoW1xSPrj+\nsKojeth7HxM9rNDp+8Xza8Hh64Wd/UpcabjwU8xgJ1+T9IZv8bcchsxpuN0Auvmo\n76gszwSGub39YYr/XuG5mj5fAfJsA7Eq1bFOCDJsz36FiUdyx4qgKuN5NTmipXtN\nC+1rr55TkX5gpuEv/1w=\n-----END PUBLIC KEY-----\n",
                            "rsa_bits": "2048"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.tls"
                },
                "tls_private_key.vault-server": {
                    "type": "tls_private_key",
                    "depends_on": [],
                    "primary": {
                        "id": "261bfae501f3b39a51ecf606cd2318066f4145f7",
                        "attributes": {
                            "algorithm": "ECDSA",
                            "ecdsa_curve": "P521",
                            "id": "261bfae501f3b39a51ecf606cd2318066f4145f7",
                            "private_key_pem": "-----BEGIN EC PRIVATE KEY-----\nMIHcAgEBBEIB99x1KKeCWTYVzeDYAGBIl3/C9gVUUP0+cNIXgi8sc9q8dFkjACMK\nhuVG/5nZQzZdbM4KdMp2q+vCO74GWmWZFmSgBwYFK4EEACOhgYkDgYYABADADKih\ngrwAckFT6VSHED+UVcgihqrCQWQ8HKDHHdIwSefaPlVC/ULZFBJ8Bam/n6HwXTTB\nmoz2Hjqnu6MzVLv+iwGz1fKsC9T1S7twajdS+kqQjIlyyTmQUzyzBIWHXsKfXcD5\nbsk4A/j7VVGaSlG1AzKbIs6Nl/s0PnxZr3rOdPo3Wg==\n-----END EC PRIVATE KEY-----\n",
                            "public_key_openssh": "ecdsa-sha2-nistp521 AAAAE2VjZHNhLXNoYTItbmlzdHA1MjEAAAAIbmlzdHA1MjEAAACFBADADKihgrwAckFT6VSHED+UVcgihqrCQWQ8HKDHHdIwSefaPlVC/ULZFBJ8Bam/n6HwXTTBmoz2Hjqnu6MzVLv+iwGz1fKsC9T1S7twajdS+kqQjIlyyTmQUzyzBIWHXsKfXcD5bsk4A/j7VVGaSlG1AzKbIs6Nl/s0PnxZr3rOdPo3Wg==\n",
                            "public_key_pem": "-----BEGIN PUBLIC KEY-----\nMIGbMBAGByqGSM49AgEGBSuBBAAjA4GGAAQAwAyooYK8AHJBU+lUhxA/lFXIIoaq\nwkFkPBygxx3SMEnn2j5VQv1C2RQSfAWpv5+h8F00wZqM9h46p7ujM1S7/osBs9Xy\nrAvU9Uu7cGo3UvpKkIyJcsk5kFM8swSFh17Cn13A+W7JOAP4+1VRmkpRtQMymyLO\njZf7ND58Wa96znT6N1o=\n-----END PUBLIC KEY-----\n",
                            "rsa_bits": "2048"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.tls"
                },
                "tls_self_signed_cert.root": {
                    "type": "tls_self_signed_cert",
                    "depends_on": [
                        "tls_private_key.root"
                    ],
                    "primary": {
                        "id": "217424019593170473820557912193270953444",
                        "attributes": {
                            "allowed_uses.#": "1",
                            "allowed_uses.0": "cert_signing",
                            "cert_pem": "-----BEGIN CERTIFICATE-----\nMIIDUjCCArSgAwIBAgIRAKOSV86b5D5avHzMoKO2NeQwCgYIKoZIzj0EAwQwgcQx\nCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEVMBMGA1UEBxMMVGhlIEludHJhbmV0\nMRswGQYDVQQJExIxMjMgRXhhbXBsZSBTdHJlZXQxEzARBgNVBBETCjk1NTU5LTEy\nMjcxFTATBgNVBAoTDEV4YW1wbGUsIEluYzEsMCoGA1UECxMjRGVwYXJ0bWVudCBv\nZiBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkxGjAYBgNVBAMTEUV4YW1wbGUgSW5jLiBS\nb290MB4XDTE4MDcxOTAzMTczMloXDTIxMDcxODAzMTczMlowgcQxCzAJBgNVBAYT\nAlVTMQswCQYDVQQIEwJDQTEVMBMGA1UEBxMMVGhlIEludHJhbmV0MRswGQYDVQQJ\nExIxMjMgRXhhbXBsZSBTdHJlZXQxEzARBgNVBBETCjk1NTU5LTEyMjcxFTATBgNV\nBAoTDEV4YW1wbGUsIEluYzEsMCoGA1UECxMjRGVwYXJ0bWVudCBvZiBDZXJ0aWZp\nY2F0ZSBBdXRob3JpdHkxGjAYBgNVBAMTEUV4YW1wbGUgSW5jLiBSb290MIGbMBAG\nByqGSM49AgEGBSuBBAAjA4GGAAQBxR5surUAEw4ClTvHkXpoW1xSPrj+sKojeth7\nHxM9rNDp+8Xza8Hh64Wd/UpcabjwU8xgJ1+T9IZv8bcchsxpuN0Auvmo76gszwSG\nub39YYr/XuG5mj5fAfJsA7Eq1bFOCDJsz36FiUdyx4qgKuN5NTmipXtNC+1rr55T\nkX5gpuEv/1yjQjBAMA4GA1UdDwEB/wQEAwICBDAPBgNVHRMBAf8EBTADAQH/MB0G\nA1UdDgQWBBQxvFDQmEUsK4UsPTlJYJvSgkspVTAKBggqhkjOPQQDBAOBiwAwgYcC\nQW5kUByaEkQFNTLaifQwRcsNg/ICOYKR3bO8c/h5o+QzDo9YXppMM/5IvZYlthas\nuxtXMPUwcRv6k6bssPAGyadfAkIBwcJp2AQR4/9Vu+qhTIevyeTYEVvasrbH/IMH\nF+07cArLkNa0Wg+jrCpl79fX/zkgHI/22b179INiXcXdLLWvgZo=\n-----END CERTIFICATE-----\n",
                            "early_renewal_hours": "8760",
                            "id": "217424019593170473820557912193270953444",
                            "is_ca_certificate": "true",
                            "key_algorithm": "ECDSA",
                            "private_key_pem": "c7b1af27c5ccd276129cddb612c4c8c6c6f2d759",
                            "subject.#": "1",
                            "subject.0.common_name": "Example Inc. Root",
                            "subject.0.country": "US",
                            "subject.0.locality": "The Intranet",
                            "subject.0.organization": "Example, Inc",
                            "subject.0.organizational_unit": "Department of Certificate Authority",
                            "subject.0.postal_code": "95559-1227",
                            "subject.0.province": "CA",
                            "subject.0.serial_number": "",
                            "subject.0.street_address.#": "1",
                            "subject.0.street_address.0": "123 Example Street",
                            "validity_end_time": "2021-07-17T20:17:32.091156-07:00",
                            "validity_period_hours": "26280",
                            "validity_start_time": "2018-07-18T20:17:32.091156-07:00"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.tls"
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "vault",
                "vault-server"
            ],
            "outputs": {
                "depends_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "7160941022908547468"
                },
                "health_check": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "instance_group": {
                    "sensitive": false,
                    "type": "string",
                    "value": "https://www.googleapis.com/compute/v1/projects/id-test-deploy-2/zones/us-east4-b/instanceGroups/vault-us-east4"
                },
                "instance_template": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "https://www.googleapis.com/compute/beta/projects/id-test-deploy-2/global/instanceTemplates/default-20180719031747229400000001"
                    ]
                },
                "instances": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        []
                    ]
                },
                "name": {
                    "sensitive": false,
                    "type": "string",
                    "value": "vault-us-east4"
                },
                "network_ip": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "region_depends_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "region_instance_group": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "service_port": {
                    "sensitive": false,
                    "type": "string",
                    "value": "80"
                },
                "service_port_name": {
                    "sensitive": false,
                    "type": "string",
                    "value": "hc"
                },
                "target_tags": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "allow-service"
                    ]
                }
            },
            "resources": {
                "data.google_compute_instance_group.zonal": {
                    "type": "google_compute_instance_group",
                    "depends_on": [
                        "google_compute_instance_group_manager.default.*"
                    ],
                    "primary": {
                        "id": "us-east4-b/vault-us-east4",
                        "attributes": {
                            "description": "This instance group is controlled by Instance Group Manager 'vault-us-east4'. To modify instances in this group, use the Instance Group Manager API: https://cloud.google.com/compute/docs/reference/latest/instanceGroupManagers",
                            "id": "us-east4-b/vault-us-east4",
                            "instances.#": "0",
                            "name": "vault-us-east4",
                            "named_port.#": "1",
                            "named_port.0.name": "hc",
                            "named_port.0.port": "80",
                            "network": "https://www.googleapis.com/compute/v1/projects/id-test-deploy-2/global/networks/default",
                            "project": "id-test-deploy-2",
                            "self_link": "https://www.googleapis.com/compute/v1/projects/id-test-deploy-2/zones/us-east4-b/instanceGroups/vault-us-east4",
                            "size": "0",
                            "zone": "us-east4-b"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "data.google_compute_zones.available": {
                    "type": "google_compute_zones",
                    "depends_on": [],
                    "primary": {
                        "id": "2018-07-19 03:17:29.712933 +0000 UTC",
                        "attributes": {
                            "id": "2018-07-19 03:17:29.712933 +0000 UTC",
                            "names.#": "3",
                            "names.0": "us-east4-a",
                            "names.1": "us-east4-b",
                            "names.2": "us-east4-c",
                            "project": "id-test-deploy-2",
                            "region": "us-east4"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "google_compute_firewall.default-ssh": {
                    "type": "google_compute_firewall",
                    "depends_on": [],
                    "primary": {
                        "id": "vault-us-east4-vm-ssh",
                        "attributes": {
                            "allow.#": "1",
                            "allow.803338340.ports.#": "1",
                            "allow.803338340.ports.0": "22",
                            "allow.803338340.protocol": "tcp",
                            "deny.#": "0",
                            "description": "",
                            "destination_ranges.#": "0",
                            "direction": "INGRESS",
                            "disabled": "false",
                            "id": "vault-us-east4-vm-ssh",
                            "name": "vault-us-east4-vm-ssh",
                            "network": "https://www.googleapis.com/compute/v1/projects/id-test-deploy-2/global/networks/default",
                            "priority": "1000",
                            "project": "id-test-deploy-2",
                            "self_link": "https://www.googleapis.com/compute/v1/projects/id-test-deploy-2/global/firewalls/vault-us-east4-vm-ssh",
                            "source_ranges.#": "1",
                            "source_ranges.1080289494": "0.0.0.0/0",
                            "source_service_accounts.#": "0",
                            "source_tags.#": "0",
                            "target_service_accounts.#": "0",
                            "target_tags.#": "1",
                            "target_tags.2542268873": "allow-ssh"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "google_compute_instance_group_manager.default": {
                    "type": "google_compute_instance_group_manager",
                    "depends_on": [
                        "google_compute_health_check.mig-health-check.*",
                        "google_compute_instance_template.default"
                    ],
                    "primary": {
                        "id": "vault-us-east4",
                        "attributes": {
                            "auto_healing_policies.#": "1",
                            "auto_healing_policies.0.health_check": "",
                            "auto_healing_policies.0.initial_delay_sec": "300",
                            "base_instance_name": "vault-us-east4",
                            "description": "compute VM Instance Group",
                            "fingerprint": "_nXxLjzm7WY=",
                            "id": "vault-us-east4",
                            "instance_group": "https://www.googleapis.com/compute/v1/projects/id-test-deploy-2/zones/us-east4-b/instanceGroups/vault-us-east4",
                            "instance_template": "https://www.googleapis.com/compute/v1/projects/id-test-deploy-2/global/instanceTemplates/default-20180719031747229400000001",
                            "name": "vault-us-east4",
                            "named_port.#": "1",
                            "named_port.0.name": "hc",
                            "named_port.0.port": "80",
                            "project": "id-test-deploy-2",
                            "self_link": "https://www.googleapis.com/compute/v1/projects/id-test-deploy-2/zones/us-east4-b/instanceGroupManagers/vault-us-east4",
                            "target_pools.#": "0",
                            "target_size": "1",
                            "update_strategy": "NONE",
                            "version.#": "1",
                            "version.0.instance_template": "https://www.googleapis.com/compute/v1/projects/id-test-deploy-2/global/instanceTemplates/default-20180719031747229400000001",
                            "version.0.name": "",
                            "version.0.target_size.#": "0",
                            "wait_for_instances": "false",
                            "zone": "us-east4-b"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "google_compute_instance_template.default": {
                    "type": "google_compute_instance_template",
                    "depends_on": [],
                    "primary": {
                        "id": "default-20180719031747229400000001",
                        "attributes": {
                            "can_ip_forward": "false",
                            "description": "",
                            "disk.#": "1",
                            "disk.0.auto_delete": "true",
                            "disk.0.boot": "true",
                            "disk.0.device_name": "persistent-disk-0",
                            "disk.0.disk_name": "",
                            "disk.0.disk_size_gb": "0",
                            "disk.0.disk_type": "pd-ssd",
                            "disk.0.interface": "SCSI",
                            "disk.0.mode": "READ_WRITE",
                            "disk.0.source": "",
                            "disk.0.source_image": "debian-cloud/debian-9",
                            "disk.0.type": "PERSISTENT",
                            "id": "default-20180719031747229400000001",
                            "instance_description": "",
                            "machine_type": "n1-standard-1",
                            "metadata.%": "2",
                            "metadata.startup-script": "#!/bin/bash -xe\n\napt-get update\napt-get install -y unzip jq netcat nginx\n\n# Download and install Vault\ncd /tmp \u0026\u0026 \\\n  curl -sLO https://releases.hashicorp.com/vault/0.9.0/vault_0.9.0_linux_amd64.zip \u0026\u0026 \\\n  unzip vault_0.9.0_linux_amd64.zip \u0026\u0026 \\\n  mv vault /usr/local/bin/vault \u0026\u0026 \\\n  rm vault_0.9.0_linux_amd64.zip\n\n# Install Stackdriver for logging\ncurl -sSL https://dl.google.com/cloudagents/install-logging-agent.sh | bash\n\n# Vault config\nmkdir -p /etc/vault\ncat - \u003e /etc/vault/config.hcl \u003c\u003c'EOF'\nlistener \"tcp\" {\n  address = \"0.0.0.0:8200\"\n  tls_cert_file = \"/etc/vault/vault-server.crt.pem\"\n  tls_key_file = \"/etc/vault/vault-server.key.pem\"\n  tls_client_ca_file = \"/etc/vault/vault-server.ca.crt.pem\"\n}\n\nstorage \"gcs\" {\n  bucket           = \"id-test-deploy-2-vault\"\n  credentials_file = \"/etc/vault/gcp_credentials.json\"\n}\nEOF\nchmod 0600 /etc/vault/config.hcl\n\n# Service account key JSON credentials encrypted in GCS.\nif [[ ! -f /etc/vault/gcp_credentials.json ]]; then\n  gcloud kms decrypt \\\n    --location global \\\n    --keyring=vault \\\n    --key=vault-init \\\n    --plaintext-file /etc/vault/gcp_credentials.json \\\n    --ciphertext-file=\u003c(gsutil cat gs://id-test-deploy-2-vault-assets/vault_sa_key.json.encrypted.base64 | base64 -d)\n  chmod 0600 /etc/vault/gcp_credentials.json\nfi\n\n# Service environment\ncat - \u003e /etc/vault/vault.env \u003c\u003cEOF\nVAULT_ARGS=\nEOF\nchmod 0600 /etc/vault/vault.env\n\n# TLS key and certs\nfor tls_file in vault-server.ca.crt.pem.encrypted.base64 vault-server.key.pem.encrypted.base64 vault-server.crt.pem.encrypted.base64; do \n  gcloud kms decrypt \\\n    --location global \\\n    --keyring=vault \\\n    --key=vault-init \\\n    --plaintext-file /etc/vault/${tls_file//.encrypted.base64/} \\\n    --ciphertext-file=\u003c(gsutil cat gs://id-test-deploy-2-vault-assets/${tls_file} | base64 -d)\n  chmod 0600 /etc/vault/${tls_file//.encrypted.base64/}\ndone\n\n# Systemd service\ncat - \u003e /etc/systemd/system/vault.service \u003c\u003c'EOF'\n[Service]\nEnvironmentFile=/etc/vault/vault.env\nExecStart=\nExecStart=/usr/local/bin/vault server -config=/etc/vault/config.hcl ${VAULT_ARGS}\nEOF\nchmod 0600 /etc/systemd/system/vault.service\n\nsystemctl daemon-reload\nsystemctl enable vault\nsystemctl start vault\n\n# Setup vault env\nexport VAULT_ADDR=https://127.0.0.1:8200\nexport VAULT_CACERT=/etc/vault/vault-server.ca.crt.pem\nexport VAULT_CLIENT_CERT=/etc/vault/vault-server.crt.pem\nexport VAULT_CLIENT_KEY=/etc/vault/vault-server.key.pem\n\n# Add health-check proxy, GCE doesn't support https health checks.\ncat - \u003e /etc/nginx/sites-available/default \u003c\u003cEOF\nserver {\n    listen 80;\n    location / {\n        proxy_pass ${VAULT_ADDR}/v1/sys/health?standbyok=true\u0026sealedcode=200;\n    }\n}\nEOF\nsystemctl enable nginx\nsystemctl restart nginx\n\n# Wait 30s for Vault to start\n(while [[ $count -lt 15 \u0026\u0026 \"$(vault status 2\u003e\u00261)\" =~ \"connection refused\" ]]; do ((count=count+1)) ; echo \"$(date) $count: Waiting for Vault to start...\" ; sleep 2; done \u0026\u0026 [[ $count -lt 15 ]])\n[[ $? -ne 0 ]] \u0026\u0026 echo \"ERROR: Error waiting for Vault to start\" \u0026\u0026 exit 1\n\n# Initialize Vault, save encrypted unseal and root keys to Cloud Storage bucket.\nif [[ $(vault status) =~ \"Sealed: true\" ]]; then\n  echo \"Vault already initialized\"\nelse\n  vault init \u003e /tmp/vault_unseal_keys.txt\n\n  gcloud kms encrypt \\\n    --location=global  \\\n    --keyring=vault \\\n    --key=vault-init \\\n    --plaintext-file=/tmp/vault_unseal_keys.txt \\\n    --ciphertext-file=/tmp/vault_unseal_keys.txt.encrypted\n\n  gsutil cp /tmp/vault_unseal_keys.txt.encrypted gs://id-test-deploy-2-vault-assets\n  rm -f /tmp/vault_unseal_keys.txt*\nfi",
                            "metadata.tf_depends_id": "",
                            "metadata_fingerprint": "kmvYloEvUsg=",
                            "min_cpu_platform": "",
                            "name": "default-20180719031747229400000001",
                            "name_prefix": "default-",
                            "network_interface.#": "1",
                            "network_interface.0.access_config.#": "1",
                            "network_interface.0.access_config.0.assigned_nat_ip": "",
                            "network_interface.0.access_config.0.nat_ip": "",
                            "network_interface.0.access_config.0.network_tier": "PREMIUM",
                            "network_interface.0.address": "",
                            "network_interface.0.alias_ip_range.#": "0",
                            "network_interface.0.network": "https://www.googleapis.com/compute/v1/projects/id-test-deploy-2/global/networks/default",
                            "network_interface.0.network_ip": "",
                            "network_interface.0.subnetwork": "https://www.googleapis.com/compute/v1/projects/id-test-deploy-2/regions/us-east4/subnetworks/default",
                            "network_interface.0.subnetwork_project": "id-test-deploy-2",
                            "project": "id-test-deploy-2",
                            "region": "us-east4",
                            "scheduling.#": "1",
                            "scheduling.0.automatic_restart": "true",
                            "scheduling.0.on_host_maintenance": "MIGRATE",
                            "scheduling.0.preemptible": "false",
                            "self_link": "https://www.googleapis.com/compute/beta/projects/id-test-deploy-2/global/instanceTemplates/default-20180719031747229400000001",
                            "service_account.#": "1",
                            "service_account.0.email": "vault-admin@id-test-deploy-2.iam.gserviceaccount.com",
                            "service_account.0.scopes.#": "5",
                            "service_account.0.scopes.1693978638": "https://www.googleapis.com/auth/devstorage.full_control",
                            "service_account.0.scopes.172152165": "https://www.googleapis.com/auth/logging.write",
                            "service_account.0.scopes.1733087937": "https://www.googleapis.com/auth/cloud-platform",
                            "service_account.0.scopes.299962681": "https://www.googleapis.com/auth/compute",
                            "service_account.0.scopes.4177124133": "https://www.googleapis.com/auth/monitoring.write",
                            "tags.#": "2",
                            "tags.19637221": "allow-service",
                            "tags.2542268873": "allow-ssh",
                            "tags_fingerprint": ""
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.google"
                },
                "null_resource.dummy_dependency": {
                    "type": "null_resource",
                    "depends_on": [
                        "google_compute_instance_group_manager.default"
                    ],
                    "primary": {
                        "id": "7160941022908547468",
                        "attributes": {
                            "id": "7160941022908547468"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.null"
                }
            },
            "depends_on": []
        }
    ]
}
